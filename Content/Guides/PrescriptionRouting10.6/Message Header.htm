<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" xml:lang="en-us" MadCap:lastBlockDepth="6" MadCap:lastHeight="2381.333" MadCap:lastWidth="913">
    <head>
        <link href="../../Resources/Stylesheets/GuideTables.css" rel="stylesheet" MadCap:stylesheetType="table" /><title></title>
    </head>
    <body>
        <h1 class="Heading1"><a name="_Message_Header"></a><a name="_Toc443643306"></a>Message Header</h1>
        <p class="BodyText1">Surescripts uses a message header for all messages. The message header, also called the XML wrapper, follows the NCPDP SCRIPT standard version 10.6 with one addition; the Digital Signature element for EPCS.</p>
        <h2 class="Heading2"><a name="Message"></a>Message Header – XML</h2>
        <p class="BodyText1">In XML diagrams, blocks that are solid are mandatory, whereas blocks that have dotted lines are conditional.</p>
        <p class="Graphic">
            <img src="../../Resources/Images/Prescription Routing 10.6/Message Header XML.png" style="left: 0;text-align: left;z-index: 1;visibility: visible;mso-wrap-style: square;mso-width-percent: 0;mso-height-percent: 0;mso-wrap-distance-left: 9pt;mso-wrap-distance-top: 0;mso-wrap-distance-right: 9pt;mso-wrap-distance-bottom: 0;mso-position-horizontal: absolute;mso-position-horizontal-relative: text;mso-position-vertical: absolute;mso-position-vertical-relative: text;mso-width-percent: 0;mso-height-percent: 0;mso-width-relative: page;mso-height-relative: page;margin-left: 0pt;width: 419px;height: 797px;" MadCap:mediastyle="@media print { max-width: 95%; }" />
        </p>
        <h2 class="Heading2"><a name="Message2"></a>Message Header Elements</h2>
        <p class="StylebodytextBold">Requirement Designation</p>
        <p class="StylebodytextBold">Element Attributes:</p>
        <table class="TableStyle-GuideTables" cellspacing="0" style="mc-table-style: url('../../Resources/Stylesheets/GuideTables.css');">
            <col class="TableStyle-GuideTables-Column-Column1" />
            <col class="TableStyle-GuideTables-Column-Column1" />
            <thead>
                <tr class="TableStyle-GuideTables-Head-Header1">
                    <th class="TableStyle-GuideTables-HeadE-Column1-Header1">
                        <p class="TableHeading">Code</p>
                    </th>
                    <th class="TableStyle-GuideTables-HeadD-Column1-Header1">
                        <p class="TableHeading">Description</p>
                    </th>
                </tr>
            </thead>
            <tbody>
                <tr class="TableStyle-GuideTables-Body-Body1">
                    <td class="TableStyle-GuideTables-BodyE-Column1-Body1">
                        <p class="TableBody">M</p>
                    </td>
                    <td class="TableStyle-GuideTables-BodyD-Column1-Body1">
                        <p class="TableBody">Required/Mandatory - the element must be used.</p>
                    </td>
                </tr>
                <tr class="TableStyle-GuideTables-Body-Body1">
                    <td class="TableStyle-GuideTables-BodyE-Column1-Body1">
                        <p class="TableBody">C</p>
                    </td>
                    <td class="TableStyle-GuideTables-BodyD-Column1-Body1">
                        <p class="TableBody">Situational/Conditional - the element must be used if conditions are met. Some fields do not have specific conditions. Data should be sent if available.</p>
                        <p class="TableBody">Where comments are “Not used by Surescripts”, information will be passed on but not used by, Surescripts for processing.</p>
                    </td>
                </tr>
                <tr class="TableStyle-GuideTables-Body-Body1">
                    <td class="TableStyle-GuideTables-BodyE-Column1-Body1">
                        <p class="TableBody">D</p>
                    </td>
                    <td class="TableStyle-GuideTables-BodyD-Column1-Body1">
                        <p class="TableBody">Dependent - the element is required or conditional based on the message type. See comments for specific messages.</p>
                    </td>
                </tr>
                <tr class="TableStyle-GuideTables-Body-Body1">
                    <td class="TableStyle-GuideTables-BodyB-Column1-Body1" style="background-color: #a9a9a9;">
                        <p class="TableBody">X</p>
                    </td>
                    <td class="TableStyle-GuideTables-BodyA-Column1-Body1" style="background-color: #a9a9a9;">
                        <p class="TableBody">Not used; will be rejected if sent.</p>
                    </td>
                </tr>
            </tbody>
        </table>
        <p class="BodyText1">Elements that are not used by NCPDP have been grayed out or removed from the message specifications.</p>
        <p class="BodyText1">In the following tables the &lt;&gt; symbols are used in the element name column to indicate XML name tags.</p>
        <p class="StylebodytextBold">M/C – Mandatory or Conditional</p>
        <table class="TableStyle-GuideTables" cellspacing="0" style="mc-table-style: url('../../Resources/Stylesheets/GuideTables.css');">
            <col class="TableStyle-GuideTables-Column-Column1" />
            <col class="TableStyle-GuideTables-Column-Column1" />
            <col class="TableStyle-GuideTables-Column-Column1" />
            <col class="TableStyle-GuideTables-Column-Column1" />
            <col class="TableStyle-GuideTables-Column-Column1" />
            <thead>
                <tr class="TableStyle-GuideTables-Head-Header1">
                    <th class="TableStyle-GuideTables-HeadE-Column1-Header1">
                        <p class="TableHeading">M/C</p>
                    </th>
                    <th class="TableStyle-GuideTables-HeadE-Column1-Header1">
                        <p class="TableHeading">Element</p>
                    </th>
                    <th class="TableStyle-GuideTables-HeadE-Column1-Header1">
                        <p class="TableHeading">Data Type</p>
                    </th>
                    <th class="TableStyle-GuideTables-HeadE-Column1-Header1">
                        <p class="TableHeading">Validations</p>
                    </th>
                    <th class="TableStyle-GuideTables-HeadD-Column1-Header1">
                        <p class="TableHeading">Comments</p>
                    </th>
                </tr>
            </thead>
            <tbody>
                <tr class="TableStyle-GuideTables-Body-Body1">
                    <td class="TableStyle-GuideTables-BodyE-Column1-Body1">
                        <p class="TableBody">M</p>
                    </td>
                    <td class="TableStyle-GuideTables-BodyE-Column1-Body1">
                        <p class="TableBody">&lt;To&gt;</p>
                    </td>
                    <td class="TableStyle-GuideTables-BodyE-Column1-Body1">
                        <p class="TableBody">Complex Type</p>
                    </td>
                    <td class="TableStyle-GuideTables-BodyE-Column1-Body1">
                        <p class="TableBody">&#160;</p>
                    </td>
                    <td class="TableStyle-GuideTables-BodyD-Column1-Body1">
                        <p class="TableBody">The identification of the intended receiver of the message.</p>
                    </td>
                </tr>
                <tr class="TableStyle-GuideTables-Body-Body1">
                    <td class="TableStyle-GuideTables-BodyE-Column1-Body1">
                        <p class="TableBody">M</p>
                    </td>
                    <td class="TableStyle-GuideTables-BodyE-Column1-Body1">
                        <p class="TableBody">&lt;From&gt;</p>
                    </td>
                    <td class="TableStyle-GuideTables-BodyE-Column1-Body1">
                        <p class="TableBody">Complex Type</p>
                    </td>
                    <td class="TableStyle-GuideTables-BodyE-Column1-Body1">
                        <p class="TableBody">&#160;</p>
                    </td>
                    <td class="TableStyle-GuideTables-BodyD-Column1-Body1">
                        <p class="TableBody">The identification of the sender of the message.</p>
                    </td>
                </tr>
                <tr class="TableStyle-GuideTables-Body-Body1">
                    <td class="TableStyle-GuideTables-BodyE-Column1-Body1">
                        <p class="TableBody">M</p>
                    </td>
                    <td class="TableStyle-GuideTables-BodyE-Column1-Body1">
                        <p class="TableBody">&lt;MessageID&gt;</p>
                    </td>
                    <td class="TableStyle-GuideTables-BodyE-Column1-Body1">
                        <p class="TableBody">an..35M</p>
                    </td>
                    <td class="TableStyle-GuideTables-BodyE-Column1-Body1">
                        <p class="TableBody">&#160;</p>
                    </td>
                    <td class="TableStyle-GuideTables-BodyD-Column1-Body1">
                        <p class="TableBody">A minimum set of standards/algorithms should be used when generating message IDs to ensure uniqueness. Customers should utilize Global Unique Identifiers (GUIDs).</p>
                    </td>
                </tr>
                <tr class="TableStyle-GuideTables-Body-Body1">
                    <td class="TableStyle-GuideTables-BodyE-Column1-Body1">
                        <p class="TableBody">D</p>
                    </td>
                    <td class="TableStyle-GuideTables-BodyE-Column1-Body1">
                        <p class="TableBody">&lt;RelatesToMessageID&gt;</p>
                    </td>
                    <td class="TableStyle-GuideTables-BodyE-Column1-Body1">
                        <p class="TableBody">an..35</p>
                    </td>
                    <td class="TableStyle-GuideTables-BodyE-Column1-Body1">
                        <p class="TableBody">&#160;</p>
                    </td>
                    <td class="TableStyle-GuideTables-BodyD-Column1-Body1">
                        <p class="TableBody">Relates to Message ID.</p>
                        <p class="TableBody">On a responding message, this field is mandatory and is used to link the original message (value in UIB-030-01) to the response. </p>
                        <p class="TableBody" style="margin-left: 0pt;">M = Error, Verify, Status, Rx Change Response, Refill Renewal Response, Cancel Rx Response</p>
                        <p class="TableBody" style="margin-left: 0pt;">C = NewRx, Refill Renewal Request, Rx Change Request, RxFill, Cancel Rx Request, Census, Resupply</p>
                    </td>
                </tr>
                <tr class="TableStyle-GuideTables-Body-Body1">
                    <td class="TableStyle-GuideTables-BodyE-Column1-Body1">
                        <p class="TableBody">M</p>
                    </td>
                    <td class="TableStyle-GuideTables-BodyE-Column1-Body1">
                        <p class="TableBody">&lt;SentTime&gt;</p>
                    </td>
                    <td class="TableStyle-GuideTables-BodyE-Column1-Body1">
                        <p class="TableBody">Date time</p>
                    </td>
                    <td class="TableStyle-GuideTables-BodyE-Column1-Body1">
                        <p class="TableBody">YYYY-MM-DDTHH:MM:SS.FZ</p>
                        <p class="TableBody">YYYY-MM-DDTHH:MM:SS.F+00:00</p>
                        <p class="TableBody">YYYY-MM-DDTHH:MM:SS.F-00:00</p>
                    </td>
                    <td class="TableStyle-GuideTables-BodyD-Column1-Body1">
                        <p class="TableBody">Date/time of initiation.</p>
                        <p class="TableBody">The UTC time zone may be specified as Z, + 00:00, or - 00:00. Refer to xsd:dateTime for more information.</p>
                        <p class="TableBody">Example: 16:09:04.5Z would be 16 hours, 09 minutes, 04 seconds, 5 fractional seconds, and Z to denote UTC time.</p>
                    </td>
                </tr>
                <tr class="TableStyle-GuideTables-Body-Body1">
                    <td class="TableStyle-GuideTables-BodyE-Column1-Body1">
                        <p class="TableBody">C</p>
                    </td>
                    <td class="TableStyle-GuideTables-BodyE-Column1-Body1">
                        <p class="TableBody">&lt;Security&gt;</p>
                    </td>
                    <td class="TableStyle-GuideTables-BodyE-Column1-Body1">
                        <p class="TableBody">Complex Type</p>
                    </td>
                    <td class="TableStyle-GuideTables-BodyE-Column1-Body1">
                        <p class="TableBody">&#160;</p>
                    </td>
                    <td class="TableStyle-GuideTables-BodyD-Column1-Body1">
                        <p class="TableBody">For Prescription Routing, reserved for future use since this contains the sender secondary and tertiary IDs.</p>
                        <p class="TableBody">For Mailboxing, Username is used. Please refer to the Mailboxing guide for more information.</p>
                    </td>
                </tr>
                <tr class="TableStyle-GuideTables-Body-Body1">
                    <td class="TableStyle-GuideTables-BodyE-Column1-Body1">
                        <p class="TableBody">&#160;</p>
                    </td>
                    <td class="TableStyle-GuideTables-BodyE-Column1-Body1">
                        <p class="TableBody">&lt;Sender&gt;&lt;TertiaryIdentification&gt;</p>
                    </td>
                    <td class="TableStyle-GuideTables-BodyE-Column1-Body1">
                        <p class="TableBody">an..35</p>
                    </td>
                    <td class="TableStyle-GuideTables-BodyE-Column1-Body1">
                        <p class="TableBody">&#160;</p>
                    </td>
                    <td class="TableStyle-GuideTables-BodyD-Column1-Body1">
                        <p class="TableBody">Surescripts populates the Account ID (up to 5 digits) associated with the Surescripts Provider ID (SPI) or NCPDP ID of the sender.</p>
                    </td>
                </tr>
                <tr class="TableStyle-GuideTables-Body-Body1">
                    <td class="TableStyle-GuideTables-BodyE-Column1-Body1">
                        <p class="TableBody">&#160;</p>
                    </td>
                    <td class="TableStyle-GuideTables-BodyE-Column1-Body1">
                        <p class="TableBody">&lt;Receiver&gt;&lt;TertiaryIdentification&gt;</p>
                    </td>
                    <td class="TableStyle-GuideTables-BodyE-Column1-Body1">
                        <p class="TableBody">an..35</p>
                    </td>
                    <td class="TableStyle-GuideTables-BodyE-Column1-Body1">
                        <p class="TableBody">&#160;</p>
                    </td>
                    <td class="TableStyle-GuideTables-BodyD-Column1-Body1">
                        <p class="TableBody">Surescripts populates the Account ID (up to 5 digits) associated with the SPI or NCPDP ID of the receiver.</p>
                    </td>
                </tr>
                <tr class="TableStyle-GuideTables-Body-Body1">
                    <td class="TableStyle-GuideTables-BodyE-Column1-Body1">
                        <p class="TableBody">C</p>
                    </td>
                    <td class="TableStyle-GuideTables-BodyE-Column1-Body1">
                        <p class="TableBody">&lt;MailBox&gt;</p>
                    </td>
                    <td class="TableStyle-GuideTables-BodyE-Column1-Body1">
                        <p class="TableBody">MailBox Type</p>
                    </td>
                    <td class="TableStyle-GuideTables-BodyE-Column1-Body1">
                        <p class="TableBody">&#160;</p>
                    </td>
                    <td class="TableStyle-GuideTables-BodyD-Column1-Body1">
                        <p class="TableBody">&#160;</p>
                    </td>
                </tr>
                <tr class="TableStyle-GuideTables-Body-Body1">
                    <td class="TableStyle-GuideTables-BodyE-Column1-Body1">
                        <p class="TableBody">C</p>
                    </td>
                    <td class="TableStyle-GuideTables-BodyE-Column1-Body1">
                        <p class="TableBody">&lt;TestMessage&gt;</p>
                    </td>
                    <td class="TableStyle-GuideTables-BodyE-Column1-Body1">
                        <p class="TableBody">n1</p>
                    </td>
                    <td class="TableStyle-GuideTables-BodyE-Column1-Body1">
                        <p class="TableBody">0-9</p>
                    </td>
                    <td class="TableStyle-GuideTables-BodyD-Column1-Body1">
                        <p class="TableBody">When sent, allowable values should match platform that message is being sent to.</p>
                        <p class="TableBody" style="margin-top: 3pt;">Values:</p>
                        <p class="TableBody" style="margin-top: 3pt;">1 = Test </p>
                        <p class="TableBody" style="margin-top: 3pt;">All other values = Live</p>
                    </td>
                </tr>
                <tr class="TableStyle-GuideTables-Body-Body1">
                    <td class="TableStyle-GuideTables-BodyE-Column1-Body1">
                        <p class="TableBody">C</p>
                    </td>
                    <td class="TableStyle-GuideTables-BodyE-Column1-Body1">
                        <p class="TableBody">&lt;RxReferenceNumber&gt;</p>
                    </td>
                    <td class="TableStyle-GuideTables-BodyE-Column1-Body1">
                        <p class="TableBody">an..35</p>
                    </td>
                    <td class="TableStyle-GuideTables-BodyE-Column1-Body1">
                        <p class="TableBody">&#160;</p>
                    </td>
                    <td class="TableStyle-GuideTables-BodyD-Column1-Body1">
                        <p class="TableBody">&#160;</p>
                    </td>
                </tr>
                <tr class="TableStyle-GuideTables-Body-Body1">
                    <td class="TableStyle-GuideTables-BodyE-Column1-Body1">
                        <p class="TableBody">C</p>
                    </td>
                    <td class="TableStyle-GuideTables-BodyE-Column1-Body1">
                        <p class="TableBody">&lt;TertiaryIdentifier&gt;</p>
                    </td>
                    <td class="TableStyle-GuideTables-BodyE-Column1-Body1">
                        <p class="TableBody">an..3</p>
                    </td>
                    <td class="TableStyle-GuideTables-BodyE-Column1-Body1">
                        <p class="TableBody">&#160;</p>
                    </td>
                    <td class="TableStyle-GuideTables-BodyD-Column1-Body1">
                        <p class="TableBody">&#160;</p>
                    </td>
                </tr>
                <tr class="TableStyle-GuideTables-Body-Body1">
                    <td class="TableStyle-GuideTables-BodyE-Column1-Body1">
                        <p class="TableBody">C</p>
                    </td>
                    <td class="TableStyle-GuideTables-BodyE-Column1-Body1">
                        <p class="TableBody">&lt;PrescriberOrderNumber&gt;</p>
                    </td>
                    <td class="TableStyle-GuideTables-BodyE-Column1-Body1">
                        <p class="TableBody">an..35</p>
                    </td>
                    <td class="TableStyle-GuideTables-BodyE-Column1-Body1">
                        <p class="TableBody">&#160;</p>
                    </td>
                    <td class="TableStyle-GuideTables-BodyD-Column1-Body1">
                        <p class="TableBody">&#160;</p>
                    </td>
                </tr>
                <tr class="TableStyle-GuideTables-Body-Body1">
                    <td class="TableStyle-GuideTables-BodyE-Column1-Body1">
                        <p class="TableBody">C</p>
                    </td>
                    <td class="TableStyle-GuideTables-BodyE-Column1-Body1">
                        <p class="TableBody">&lt;DigitalSignature&gt;</p>
                    </td>
                    <td class="TableStyle-GuideTables-BodyE-Column1-Body1">
                        <p class="TableBody">Complex Type</p>
                    </td>
                    <td class="TableStyle-GuideTables-BodyE-Column1-Body1">
                        <p class="TableBody">&#160;</p>
                    </td>
                    <td class="TableStyle-GuideTables-BodyD-Column1-Body1">
                        <p class="TableBody">The three tags under Digital Signature &lt;DigestValue&gt;, &lt;SignatureValue&gt;, and &lt;X509Data&gt; are required to have their data base64 encoded.</p>
                    </td>
                </tr>
                <tr class="TableStyle-GuideTables-Body-Body1">
                    <td class="TableStyle-GuideTables-BodyE-Column1-Body1">
                        <p class="TableBody">M</p>
                    </td>
                    <td class="TableStyle-GuideTables-BodyE-Column1-Body1">
                        <p class="TableBody">&lt;DigestValue&gt;</p>
                    </td>
                    <td class="TableStyle-GuideTables-BodyE-Column1-Body1">
                        <p class="TableBody">String</p>
                        <p class="TableBody">an..35</p>
                    </td>
                    <td class="TableStyle-GuideTables-BodyE-Column1-Body1">
                        <p class="TableBody">See <MadCap:xref href="EPCS Digital Signatures.htm">EPCS Digital Signatures on page&#160;1</MadCap:xref></p>
                    </td>
                    <td class="TableStyle-GuideTables-BodyD-Column1-Body1">
                        <p class="TableBody">DigestValue</p>
                        <p class="TableBody">Concatenate all fields listed in 7.2 in the specified order, apply a SHA1 Hash, base64Encode the result. This field is used to confirm that all fields have been included in the digital signature.</p>
                        <p class="TableBody">The DigestValue is the result of a SHA-1 Hash, which is always 160 bits or 20 bytes.</p>
                    </td>
                </tr>
                <tr class="TableStyle-GuideTables-Body-Body1">
                    <td class="TableStyle-GuideTables-BodyE-Column1-Body1">
                        <p class="TableBody">M</p>
                    </td>
                    <td class="TableStyle-GuideTables-BodyE-Column1-Body1">
                        <p class="TableBody">&lt;SignatureValue&gt;</p>
                    </td>
                    <td class="TableStyle-GuideTables-BodyE-Column1-Body1">
                        <p class="TableBody">String</p>
                        <p class="TableBody">an..180</p>
                    </td>
                    <td class="TableStyle-GuideTables-BodyE-Column1-Body1">
                        <p class="TableBody">See <MadCap:xref href="EPCS Digital Signatures.htm">EPCS Digital Signatures on page&#160;1</MadCap:xref></p>
                    </td>
                    <td class="TableStyle-GuideTables-BodyD-Column1-Body1">
                        <p class="TableBody">DigestValue that has been signed with a Private Key, base64 encode the results.</p>
                    </td>
                </tr>
                <tr class="TableStyle-GuideTables-Body-Body1">
                    <td class="TableStyle-GuideTables-BodyB-Column1-Body1">
                        <p class="TableBody">M</p>
                    </td>
                    <td class="TableStyle-GuideTables-BodyB-Column1-Body1">
                        <p class="TableBody">&lt;X509Data&gt;</p>
                    </td>
                    <td class="TableStyle-GuideTables-BodyB-Column1-Body1">
                        <p class="TableBody">String</p>
                        <p class="TableBody">an..4000</p>
                    </td>
                    <td class="TableStyle-GuideTables-BodyB-Column1-Body1">
                        <p class="TableBody">See <MadCap:xref href="EPCS Digital Signatures.htm">EPCS Digital Signatures on page&#160;1</MadCap:xref></p>
                    </td>
                    <td class="TableStyle-GuideTables-BodyA-Column1-Body1">
                        <p class="TableBody">Base64 encoded raw bytes of the X509 certificate (which contains the Public Key).</p>
                        <p class="TableBody">Used by the receiver to validate the digital signature as described in <MadCap:xref href="EPCS Digital Signatures.htm">EPCS Digital Signatures on page&#160;1</MadCap:xref><span class="Hyperlink" style="font-size: 9pt;">.</span></p>
                    </td>
                </tr>
            </tbody>
        </table>
    </body>
</html>